
netmap主要利用了mmap，将网卡中数据 直接映射到内存。netmap直接接管网卡数据，可以绕过内核协议栈，我们直接在应用程序中实现协议栈，对协议栈进行解析，就可以得到网络数据了。




零拷贝，本质上是DMA的方式，不需要CPU参与

### 什么是DMA

DMA传输将数据从一个地址空间复制到另一个地址空间，提供在外设和存储器之间或者存储器和存储器之间的高速数据传输。当CPU初始化这个传输动作，传输动作本身是由DMA控制器来实现和完成的。DMA传输方式无需CPU直接控制传输，也没有中断处理方式那样保留现场和恢复现场过程，通过硬件为RAM和IO设备开辟一条直接传输数据的通道，使得CPU的效率大大提高。



## 传统I/O 存在哪些问题

上下文切换


## 零拷贝

在linux中零拷贝技术主要有三种实现思路：用户态直接i/o、减少数据拷贝次数以及写时复制技术。

用户态直接I/O: 应用程序可以直接访问硬件存储，操作系统内核只能是辅助数据传输，这种方式依旧存在用户空间和内核空间的上下文切换，硬件上的数据直接拷贝到用户空间，不经过内核空间，因此，直接I/O 不存在内核空间缓冲区和用户空间缓冲区之间的数据拷贝。

减少数据拷贝次数：在数据传输过程中，避免数据在用户空间缓冲区和系统内核空间缓冲区之间的cpu拷贝，以及数据在系统内核空间内的copu拷贝，这也是当前主流零拷贝技术的实现思路。



