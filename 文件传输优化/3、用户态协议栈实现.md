
## 用户态协议栈和内核态协议栈


### 内核态协议栈

linux默认的协议栈是在内核中。Client发送数据给server，数据首先到达网卡，经过两步到达应用程序：

1）将数据从网卡的内存copy到内核协议栈，内核协议栈对数据包进行解析；  
2）应用程序通过调用recv函数，将数据从内核copy进用户空间，得到应用层的数据包。  

网卡的作用：接收的时候，是将光电信号转换成数字信号；发送的时候，将数字信号转换成光电信号。


### 用户态协议栈

什么是用户态协议栈呢？就是将协议栈，做到应用程序。为什么要这么做呢？减少了一次数据copy的过程，绕过内核，数据可以直接从网卡copy到应用程序，对于性能会有很大的提升。


这样经过一层协议栈，如果将协议栈移动到用户态实现？

## 如何实现

用户态协议栈：netmap、dpdk

### netmap

netmap 主要利用了mmap，将网卡中的数据直接映射到内存，netmap直接接管网卡数据，可以绕过内核协议栈。

我们直接在应用程序中实现协议栈，对协议进行解压，就可以获取到网络数据了。


这个需要在linux机器上使用一个工具才能实现。

## 













